<!DOCTYPE html>
<html lang="ur">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AzharBaba ‚Äî Final Lookup</title>
  <style>
    :root{ --bg:#000; --card:#111; --accent:#c00000; --wa:#25D366; }
    body{margin:0;padding:0;background:var(--bg);color:#fff;font-family:Arial, sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .wrap{width:100%;max-width:880px;padding:16px}
    .card{background:var(--card);border:2px solid var(--accent);padding:20px;border-radius:12px;box-shadow:0 0 28px rgba(192,0,0,0.12)}
    h1{color:#ff6b6b;margin:0 0 12px;font-size:20px}
    input[type="text"], input[type="password"], input[type="search"]{
      width:100%;padding:11px;border-radius:8px;border:none;margin:8px 0;background:#222;color:#fff;font-size:15px;
    }
    button.primary{width:100%;padding:11px;border-radius:8px;border:none;background:linear-gradient(90deg,var(--accent),#ff0000);color:#fff;font-weight:700;cursor:pointer}
    .row{display:flex;gap:10px}
    .btn-small{padding:9px 12px;border-radius:8px;border:none;background:#444;color:#fff;cursor:pointer}
    #response{display:none;margin-top:12px;text-align:left;background:#171717;padding:12px;border-radius:8px;white-space:pre-wrap}
    .controls{display:flex;gap:10px;margin-top:12px;align-items:center}
    .wa-link{display:inline-flex;gap:8px;align-items:center;padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--wa),#128C7E);color:#fff;font-weight:700;text-decoration:none}
    .wa-icon{width:18px;height:18px;display:inline-block}
    .note{font-size:13px;color:#bbb;margin-top:10px}
    .error{color:#ffb3b3;background:#330000;padding:8px;border-radius:6px;margin-top:8px;display:none}
    .hidden{display:none !important}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- LOGIN -->
    <div id="loginCard" class="card">
      <h1>üîê Login ‚Äî AzharBaba</h1>
      <input id="username" type="text" placeholder="User name" />
      <input id="password" type="password" placeholder="Password" />
      <button class="primary" onclick="doLogin()">Login</button>
      <div id="loginError" class="error">€åŸàÿ≤ÿ± €åÿß Ÿæÿßÿ≥ Ÿàÿ±⁄à ÿ∫ŸÑÿ∑ €Å€å⁄∫€î</div>
      <p class="note">Demo credentials: <strong>User:</strong> Azhar887 &nbsp; <strong>Pass:</strong> baba887</p>
    </div>

    <!-- APP -->
    <div id="appCard" class="card hidden" style="margin-top:14px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h1>üîé AzharBaba ‚Äî Exact + Random Lookup</h1>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn-small" onclick="doLogout()">Logout</button>
        </div>
      </div>

      <input id="q" placeholder="Phone or CNIC or 'AzharBaba DB' ‚Äî eg: 03064457887 or +923220409615 or 3540275672161" />
      <div class="row" style="margin-top:6px">
        <button class="primary" style="flex:1" onclick="doLookup()">üîé Search</button>
        <button class="btn-small" onclick="fillAzhar()">AzharBaba DB</button>
      </div>

      <div id="response"></div>

      <div class="controls">
        <!-- WhatsApp link to your provided number -->
        <a id="waDirect" class="wa-link" href="https://wa.me/923064457887" target="_blank" title="Contact on WhatsApp (direct)">
          <!-- simple WhatsApp SVG -->
          <svg class="wa-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path fill="#fff" d="M20.52 3.48A11.88 11.88 0 0012 .12C5.42.12-.1 5.64-.1 12.22c0 2.12.56 4.18 1.62 6.01L.12 24l6.01-1.55A11.96 11.96 0 0012 24.12c6.58 0 12.1-5.52 12.1-12.2 0-3.26-1.26-6.25-3.58-8.44z"/>
          </svg>
          Contact: +923064457887
        </a>

        <!-- Share current result to WhatsApp (opens wa.me with text) -->
        <button id="shareBtn" class="btn-small" onclick="shareResult()">Share result on WhatsApp</button>

        <!-- Copy -->
        <button class="btn-small" onclick="copyResult()">Copy</button>
      </div>

      <p class="note">ŸÜŸàŸπ: ÿ¨Ÿà ÿ±€å⁄©ÿßÿ±⁄à ÿ¢Ÿæ ŸÜ€í ŸÅÿ±ÿß€ÅŸÖ ⁄©€å€í Ÿà€Å€å ÿßÿµŸÑ (exact) ÿØ⁄©⁄æ€å⁄∫ ⁄Ø€íÿõ ÿ®ÿßŸÇ€å ÿ≥ÿ® ŸÅÿ±ÿ∂€å/Ÿπ€åÿ≥Ÿπ €ÅŸà⁄∫ ⁄Ø€í€î</p>
    </div>
  </div>

  <script>
    // -----------------------------
    // Auth (local/dummy)
    // -----------------------------
    const AUTH_USER = "Azhar887";
    const AUTH_PASS = "baba887";
    const SKEY = "azharbaba_session_v1";

    function showLogin(){ document.getElementById("loginCard").classList.remove("hidden"); document.getElementById("appCard").classList.add("hidden"); }
    function showApp(){ document.getElementById("loginCard").classList.add("hidden"); document.getElementById("appCard").classList.remove("hidden"); }

    function doLogin(){
      const u = document.getElementById("username").value.trim();
      const p = document.getElementById("password").value;
      const err = document.getElementById("loginError");
      err.style.display = "none";
      if(u === AUTH_USER && p === AUTH_PASS){
        sessionStorage.setItem(SKEY, "1");
        showApp();
        document.getElementById("username").value = "";
        document.getElementById("password").value = "";
      } else {
        err.style.display = "block";
      }
    }

    function doLogout(){
      sessionStorage.removeItem(SKEY);
      showLogin();
    }

    (function initAuth(){
      if(sessionStorage.getItem(SKEY) === "1") showApp(); else showLogin();
    })();

    // -----------------------------
    // Helpers / normalization
    // -----------------------------
    function onlyDigits(s){ return (s||"").toString().replace(/\D/g,""); }
    function isLikelyCNIC(s){ return onlyDigits(String(s)).length === 13; }
    function isLikelyPhone(s){ const d = onlyDigits(String(s)); return (d.length >=9 && d.length <=13); }

    function phoneVariants(input){
      const out = new Set();
      if(!input) return Array.from(out);
      let s = input.toString().trim();
      const d = onlyDigits(s);
      if(s.startsWith('+')){
        out.add(s);
        out.add(d);
        if(d.startsWith("92") && d.length>=12) out.add("0"+d.slice(2));
      } else {
        out.add(d);
        if(d.length===11 && d.startsWith("0")){
          out.add(d);
          out.add("+" + "92" + d.slice(1));
        } else if(d.length===10){
          out.add("0"+d);
          out.add("+" + "92" + d.slice(1));
        } else if(d.length===12 && d.startsWith("92")){
          out.add("0"+d.slice(2));
          out.add("+"+d);
        } else {
          if(d.length>11 && d.startsWith("92")) out.add("0"+d.slice(2));
          if(d.length===9) out.add("0"+d);
          if(d.length>=10) out.add("+" + ("92"+ d.slice(d.length-10)));
        }
      }
      out.add(s.toLowerCase());
      return Array.from(out);
    }

    function normalizeCNICKey(s){
      const d = onlyDigits(String(s));
      if(d.length===13) return d;
      if(d.length>13) return d.slice(-13);
      return d.padStart(13,"0").slice(0,13);
    }

    // -----------------------------
    // exactRecords: ALL your provided originals (complete)
    // -----------------------------
    const exactRecords = {
      // No. 1: Salman bhai
      "+9203097835621": { Mobile:"+9203097835621", Name:"Salman bhai", Country:"Pakistan", CNIC:"", Address:"Unknown", Operator:"Jazz", source:"exact" },

      // No. 1: MUHAMMAD JAVED
      "+923097835621": { Mobile:"+923097835621", Name:"MUHAMMAD JAVED", Country:"Pakistan", CNIC:"3540270645781", Address:"DAAK KHANA MANDI FAIZ ABAD CHA CHAKAY GUL TEHSIL NANKANA SAHIB DISTRICT NANKANA SAHIB", Operator:"Jazz", source:"exact" },
      "3540270645781": { Mobile:"+923097835621", Name:"MUHAMMAD JAVED", Country:"Pakistan", CNIC:"3540270645781", Address:"DAAK KHANA MANDI FAIZ ABAD CHA CHAKAY GUL TEHSIL NANKANA SAHIB DISTRICT NANKANA SAHIB", Operator:"Jazz", source:"exact" },

      // No. 2: SHAHID
      "+923014939926": { Mobile:"+923014939926", Name:"SHAHID .", Country:"Pakistan", CNIC:"3550101255967", Address:"MANDI FAIZ ABAD NANKANAH SAHIB CHACHKAY GALAN NAKAN H SAHIB", Operator:"Telenor", source:"exact" },
      "3550101255967": { Mobile:"+923014939926", Name:"SHAHID .", Country:"Pakistan", CNIC:"3550101255967", Address:"MANDI FAIZ ABAD NANKANAH SAHIB CHACHKAY GALAN NAKAN H SAHIB", Operator:"Telenor", source:"exact" },

      // No. 3: Azhar bhai 887
      "+9203178267887": { Mobile:"+9203178267887", Name:"Azhar bhai 887", Country:"Pakistan", CNIC:"", Address:"Unknown", Operator:"Zong", source:"exact" },

      // No. 4: ALLAH DITTA
      "+923011684521": { Mobile:"+923011684521", Name:"ALLAH DITTA .", Country:"Pakistan", CNIC:"3540219962447", Address:"DAAK KHANA MANDI FAIZ ABAD MIRZA PUR TE EHSIL NANKANA SAHIB DISTRICT NANKANA NANKANA SAHB", Operator:"Ufone", source:"exact" },
      "3540219962447": { Mobile:"+923011684521", Name:"ALLAH DITTA .", Country:"Pakistan", CNIC:"3540219962447", Address:"DAAK KHANA MANDI FAIZ ABAD MIRZA PUR TE EHSIL NANKANA SAHIB DISTRICT NANKANA NANKANA SAHB", Operator:"Ufone", source:"exact" },

      // No. 5: MAHAR SHAKEEL
      "+923220409615": { Mobile:"+923220409615", Name:"MAHAR SHAKEEL .", Country:"Pakistan", CNIC:"3550106959055", Address:"City 0 teh/District NANKANA SAHIB", Operator:"Warid", source:"exact" },
      "3550106959055": { Mobile:"+923220409615", Name:"MAHAR SHAKEEL .", Country:"Pakistan", CNIC:"3550106959055", Address:"City 0 teh/District NANKANA SAHIB", Operator:"Warid", source:"exact" },

      // AzharBaba alias (existing M LATIF record you used)
      "azharbaba db": { Mobile:"+923064457887", Name:"M LATIF", Country:"Pakistan", CNIC:"3540275672161", Address:"CHACHKAY GAL PO MANDI FAIZ ABAD", Operator:"Jazz", source:"exact" }
    };

    // Expand variants for easier matching (0-prefix, +92, bare digits)
    (function expandVariants(){
      const keys = Object.keys(exactRecords);
      for(const k of keys){
        if(/\d/.test(k)){
          const d = onlyDigits(k);
          if(d.length>=11){
            // +92... -> 0...
            if(d.startsWith("92") && d.length>=12){
              const zero = "0"+d.slice(2);
              if(!exactRecords[zero]) exactRecords[zero] = exactRecords[k];
            }
            // 0XXXXXXXXXX -> +92...
            if(d.startsWith("0") && d.length===11){
              const plus = "+" + "92" + d.slice(1);
              if(!exactRecords[plus]) exactRecords[plus] = exactRecords[k];
              if(!exactRecords[d]) exactRecords[d] = exactRecords[k];
              if(!exactRecords[d.replace(/^0/,"")]) exactRecords[d.replace(/^0/,"")] = exactRecords[k];
            }
            // also add plain digits
            if(!exactRecords[d]) exactRecords[d] = exactRecords[k];
          }
        }
      }
    })();

    // -----------------------------
    // Random (fake) profile generator
    // -----------------------------
    function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
    function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
    const first = ["Ali","Ahmed","Hassan","Zain","Owais","Muhammad","Sana","Sara","Ayesha","Fatima","Bilal","Usman","Latif","Khalid","Imran"];
    const last = ["Khan","Malik","Raza","Ali","Butt","Hussain","Sheikh","Qureshi","Nawaz","Bashir","Latif","Farooq"];
    const areas = ["Model Town","Clifton","DHA","Cantt","Mandi Faizabad","Gulberg","Saddar","Nazimabad","Johar Town","Shadman","Garden"];
    const streets = ["Block A","Sector 7","Street 5","Near Masjid","Opp Market","Main Bazar","Gal Po","New Town","Phase 2"];
    const ops = ["Jazz","Telenor","Zong","Ufone","Warid","SCO"];

    function randomCNIC(){
      const prefixes = ["352","354","374","611","421","422","371"];
      const p = rand(prefixes);
      let rem = "";
      for (let i=0;i<10;i++) rem += Math.floor(Math.random()*10);
      return String(p) + rem.slice(0,10);
    }
    function randomPhoneLike(){
      return "0" + String(randInt(300000000,999999999)).padStart(9,"0");
    }

    function generateRandomProfile(preferredPhone, preferredCNIC){
      const name = rand(first) + " " + rand(last);
      const mobile = preferredPhone ? ( (preferredPhone.startsWith("+92")||preferredPhone.startsWith("0")) ? (preferredPhone.startsWith("+92")? preferredPhone : "+"+ "92"+ preferredPhone.slice(1)) : ("+92" + preferredPhone.replace(/^0/,"")) ) : ("+92" + randomPhoneLike().slice(1));
      const cnic = preferredCNIC ? preferredCNIC : randomCNIC();
      const address = rand(areas) + ", " + rand(streets) + " (Near " + rand(["Market","School","Masjid","Park"]) + ")";
      const operator = rand(ops);
      return { Mobile: mobile, Name: name, Country: "Pakistan", CNIC: cnic, Address: address, Operator: operator, source: "random" };
    }

    // -----------------------------
    // Main lookup flow
    // -----------------------------
    function doLookup(){
      const raw = document.getElementById("q").value.trim();
      if(!raw){ alert("ÿ®ÿ±ÿß€ÅŸê ŸÖ€Åÿ±ÿ®ÿßŸÜ€å ŸÅŸàŸÜ ŸÜŸÖÿ®ÿ± €åÿß CNIC ÿØÿ±ÿ¨ ⁄©ÿ±€å⁄∫ €åÿß 'AzharBaba DB' ŸÑ⁄©⁄æ€å⁄∫€î"); return; }

      const low = raw.toLowerCase().trim();

      // alias exact (e.g. "azharbaba db")
      if(exactRecords[low]){ showRecord(exactRecords[low]); console.log("[exact alias]", low); return; }

      // tokenize input
      const parts = raw.split(/[,\/\s]+/).filter(Boolean);
      let phoneInput = "";
      let cnicInput = "";

      for(const p of parts){
        if(!phoneInput && isLikelyPhone(p)) phoneInput = p;
        else if(!cnicInput && isLikelyCNIC(p)) cnicInput = normalizeCNICKey(p);
        else {
          const digits = onlyDigits(p);
          if(!cnicInput && digits.length===13) cnicInput = digits;
          else if(!phoneInput && (digits.length>=9 && digits.length<=13)) phoneInput = p;
        }
      }

      // single token guess
      if(!phoneInput && !cnicInput){
        const single = parts[0];
        if(single){
          if(isLikelyCNIC(single)) cnicInput = normalizeCNICKey(single);
          else if(isLikelyPhone(single)) phoneInput = single;
        }
      }

      // check phone variants for exact match
      if(phoneInput){
        const variants = phoneVariants(phoneInput);
        for(const v of variants){
          if(exactRecords[v]){ showRecord(exactRecords[v]); console.log("[exact phone]", v); return; }
        }
      }

      // check CNIC exact
      if(cnicInput){
        const normC = normalizeCNICKey(cnicInput);
        if(exactRecords[normC]){ showRecord(exactRecords[normC]); console.log("[exact cnic]", normC); return; }
      }

      // check raw digits
      const rawDigits = onlyDigits(raw);
      if(rawDigits && exactRecords[rawDigits]){ showRecord(exactRecords[rawDigits]); console.log("[exact rawdigits]", rawDigits); return; }

      // not found -> random
      const preferredPhone = phoneInput ? (phoneVariants(phoneInput)[0] || phoneInput) : "";
      const preferredCNIC = cnicInput ? normalizeCNICKey(cnicInput) : "";
      const rp = generateRandomProfile(preferredPhone, preferredCNIC);
      showRecord(rp);
      console.log("[random]", rp);
    }

    function formatRecord(r){
      return `üìû Mobile: ${r.Mobile}
üë§ Name: ${r.Name}
üåç Country: ${r.Country}
üÜî CNIC: ${r.CNIC || "N/A"}
üìç Address: ${r.Address}
üì∂ Operator: ${r.Operator}

[Type: ${r.source || "unknown"}]`;
    }

    function showRecord(r){
      const resp = document.getElementById("response");
      resp.innerText = formatRecord(r);
      resp.style.display = "block";
    }

    function fillAzhar(){ document.getElementById("q").value = "AzharBaba DB"; }

    // share result to WhatsApp (opens wa.me with message text)
    function shareResult(){
      const resp = document.getElementById("response");
      if(!resp.innerText){ alert("Ÿæ€ÅŸÑ€í ⁄©Ÿàÿ¶€å ÿ±ÿ≤ŸÑŸπ ÿØ⁄©⁄æÿßÿ¶€å⁄∫ÿå Ÿæ⁄æÿ± ÿ¥€åÿ¶ÿ± ⁄©ÿ±€å⁄∫€î"); return; }
      const text = encodeURIComponent(resp.innerText);
      const url = `https://wa.me/?text=${text}`;
      window.open(url, "_blank");
    }

    function copyResult(){
      const resp = document.getElementById("response");
      if(!resp.innerText){ alert("Ÿæ€ÅŸÑ€í ⁄©Ÿàÿ¶€å ÿ±ÿ≤ŸÑŸπ ÿØ⁄©⁄æÿßÿ¶€å⁄∫ÿå Ÿæ⁄æÿ± ⁄©ÿßŸæ€å ⁄©ÿ±€å⁄∫€î"); return; }
      navigator.clipboard.writeText(resp.innerText).then(()=> alert("Result copied to clipboard."), ()=> alert("Copy failed."));
    }
  </script>
</body>
</html>
